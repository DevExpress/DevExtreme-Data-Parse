<!DOCTYPE html>
<html>
    <head>
        <title>dxDataGrid working with Parse.com back-end</title>
        <meta charset="utf-8" />
        <meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1" />
        <meta name="apple-mobile-web-app-capable" content="yes" />
        <meta name="apple-mobile-web-app-status-bar-style" content="black">
        <meta name="msapplication-tap-highlight" content="no" />
        <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0" />
        <!-- Uncomment the line below to disable phone format detection  -->
        <!--<meta name="format-detection" content="telephone=no">-->

        <link rel="stylesheet" type="text/css" href="../lib/devextreme/styles/dx.spa.css" />
        <link rel="stylesheet" type="text/css" href="../lib/devextreme/styles/dx.common.css" />
        <link rel="stylesheet" type="text/css" href="../lib/devextreme/styles/dx.light.css" />
        <link rel="stylesheet" type="text/css" href="index.css" />

        <script type="text/javascript" src="../lib/jquery.js"></script>
        <script type="text/javascript" src="../lib/knockout.js"></script>
        <script type="text/javascript" src="../lib/globalize.js"></script>
        <script type="text/javascript" src="../lib/parse-sdk.js"></script>
        <script type="text/javascript" src="../lib/devextreme/dx.all.debug.js"></script>

        <script type="text/javascript" src="../lib/devextreme/dx.data.parse.js"></script>

        <script type="text/javascript" src="db.js"></script>
        <script type="text/javascript" src="index.js"></script>
</head>
    <body>
        <div class="body">
            <div class="site-content">
                <div class="grid-container-wrapper">
                    <div id="gridContainer" data-bind="dxDataGrid: {
                        dataSource: gridDataSource,
                        paging: {
                            enabled: false
                        },
                        filterRow: {
                            visible: true
                        },
                        grouping: {
                            autoExpandAll: true,
                            allowCollapsing: true,
                        },
                        groupPanel: {
                            visible: true,
                            allowColumnDragging: true
                        },
                        editing: {
                            mode: 'row',
                            allowAdding: true,
                            allowUpdating: true,
                            allowDeleting: true
                        },
                        columns: [
                            {
                                dataField: 'Prefix',
                                caption: 'Title',
                                width: 130
                            },
                            'FirstName',
                            'LastName',
                            {
                                dataField: 'Position'
                            },
                            {
                                dataField: 'State.id',
                                caption: 'State',
                                width: 125,
                                lookup: {
                                    displayExpr: 'Name',
                                    valueExpr: 'id',
                                    dataSource: lookupDataSource
                                }
                            },
                            {
                                dataField: 'BirthDate',
                                dataType: 'date',
                                width: 125
                            }
                        ],
                        onRowUpdating: onRowUpdating,
                        onRowInserting: onRowInserting
                    }"></div>
                </div>
            </div>
        </div>

        <div class="footer">
            <div class="left">
                <a class="dx-logo" href="http://devexpress.com" target="_blank"></a>
                <div class="text">
                    <h2>Your Next Great Web App Starts Here</h2>
                    <p>Download your free <a target="_blank" href="http://js.devexpress.com/">30 day trial</a> of DevExtreme today</p>
                </div>
            </div>
        </div>

        <div id="popupContainer" data-bind="dxPopup: { fullScreen: true, visible: popupVisible }">
            <div data-options="dxTemplate:{ name: 'title' }">
                <div style="text-align: center; font-size: 20px" data-bind="text: 'Set up access keys'"></div>
            </div>
            <div data-options="dxTemplate:{ name: 'content'}">
                <div style="margin: 10px 5px">
                    <p style="text-align:center">This demo requires<br/> <i>ApplicationID</i> and <i>JavascriptKey</i> <br/>to access your application hosted on the <a target="_blank" href="https://dashboard.parse.com/apps">Parse.com</a> service.</p>
                </div>
                <div class="dx-fieldset">
                    <div class="dx-field">
                        <div class="dx-field-label">ApplicationID</div>
                        <div class="dx-field-value" data-bind="
                            dxTextBox: { value: appID, attr: { name: 'tb-application-id' } },
                            dxValidator: {
                                validationRules: [
                                    { type: 'required', message: 'ApplicationID is required' }]
                            }"></div>
                    </div>
                    <div class="dx-field">
                        <div class="dx-field-label">JavascriptKey</div>
                        <div class="dx-field-value" data-bind="
                            dxTextBox: { value: jsKey, attr: { name: 'tb-javascript-key' } },
                            dxValidator: {
                                validationRules: [
                                    { type: 'required', message: 'JavascriptKey is required' }]
                            }"></div>
                    </div>
                    <div class="dx-field">
                        <div class="dx-field-label">Save to sessionStorage</div>
                        <div class="dx-field-value" data-bind="
                            dxCheckBox: { value: save, attr: { name: 'cb-save' } }">
                        </div>
                    </div>
                    <div class="dx-field">
                        <div class="dx-field-label"></div>
                        <div class="dx-field-value" data-bind="dxButton: { text: 'Connect', onClick: handleConnectClick }"></div>
                    </div>
                </div>
            </div>
        </div>

    </body>
</html>